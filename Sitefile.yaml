#!/usr/bin/env sitefile
#
# Sitefile for node-sitefile document server
# A note of caution: this example config does shameless things like executing any shell
# script if you want to, like call http://localhost/clean.sh. Ymmv. 
#
# Id: node-sitefile/0.0.5-dev+20161010
sitefile: 0.0.5-dev

showStackError: true

routes:

  node_modules: static:node_modules
  client: static:build/client
  style: static:build/style
  
  doc/literate: static:build/docs/docco/

  example: redir:example/main
  example/bookshelf/knex.sqlite/_/v1: bookshelfapi:example/bookshelf/knex.json
  example/bookshelf/knex: knex:example/bookshelf/knex.json
  _example: static:example

  #_pug: pug:example/**/*.pug
  #_stylus: stylus:example/**/*.styl
  #_coffee: coffee:example/**/*.coffee
  #_markdown: markdown:*.md
  #_markdown_1: markdown:example/**/*.md
  #_sh: sh:example/*.sh
  #_gv: gv:example/*.gv

  # Some defaults for root
  #FIXME: 
  '': redir:ReadMe
  index: redir:ReadMe

  # Example routes for ReadMe
  #ReadMe: du:ReadMe.rst # Du defaults to HTML
  #ReadMe: redir:ReadMe.html
  #ReadMe.html: du:ReadMe.rst
  #ReadMe.xml: du:ReadMe.rst
  
  # Dynamic rules using glob spec
  _du: du:**/*.rst
  #_rst2html: rst2html:**/*.rst
  
  #Sitefile: redir:Sitefile.yaml
  #Sitefile.yaml: static:Sitefile.yaml
  #Sitefile.json: sitefile:?resolve=sitefile
  #Sitefile/debug: sitefile:#
  #Sitefile/resource: sitefile.resource:#
  #Sitefile/handler: sitefile.handler:#
  #Sitefile/global: sitefile.global:#

  #Sitefile/core: 'core:'


options:
  global:
    du:
      link_stylesheet: true
      scripts:
        $ref: '#/defs/scripts/default/urls'
      stylesheets:
        $ref: '#/defs/stylesheets/default/urls'
    rst2html:
      link_stylesheet: true
      flags:
      - "--no-toc-backlinks"
      scripts:
        $ref: '#/defs/scripts/default/urls'
      stylesheets:
        $ref: '#/defs/stylesheets/default/urls'
    pug:
      scripts:
        $ref: '#/defs/scripts/default/urls'
      stylesheets:
        $ref: '#/defs/stylesheets/default/urls'

defs:
  scripts:
    default:
      urls:
        - /client/default.js
      paths:
        - build/client/default.js
  stylesheets:
    default:
      urls:
        - /style/default.css
      paths:
        - build/style/default.css

#apps:
#  base:
#    scripts: []
#    stylesheets:
#      - href: style/default.css
#        path: build/styles/default.css
#
#  script/default.js: static:build/client/default.js
#  style/default.js: static:build/styles/default.css

