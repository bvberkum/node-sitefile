
extends ../../../client/base


block head
  +html-meta("sitefile.main", "base", "sitefile")
  +std-html-client "PM2 process detail"

  script(type="text/javascript", src= script)

  style
    | .env-value {
    |   word-break: break-all;
    | }

block prologue

  
block header
  hr


block main
  .container.sf-pm2

    - states = {stopped: '', errored: 'danger', online: 'success'}
    - st = app.pm2_env.status

    h3 Details for #{app.name}

    table.table
      tr
        th(title="PM2 numeric id for process") Id
        th
          a(href=context.base+context.name+"/"+app.pm_id+".json")= app.pm_id
      tr
        th(title="Name for process") Name
        th
          a(href=context.base+context.name+"/"+app.pm_id+".html")= app.name
      tr
        th(title="Current PM2 status for process") Status
        td(class=states[st])= app.pm2_env.status
      tr
        th CWD
        td
          code.code= app.pm2_env.cwd
      tr
        th CMD
        td.code.proc.cmd= app.pm2_env.pm_exec_path
      tr
        th(title="Path or name for environent profile") ENV
        td= app.pm2_env.ENV
      tr
        th PID
        td(data-proc-id=app.pid).proc.pid= app.pid
      tr
        th Uptime (sec)
        td= ( ( Date.now() - app.pm2_env.pm_uptime ) / 1000).toLocaleString( 'en-us', {maximumSignificantDigits: 3})
      tr
        th Uptime (min)
        td= ( ( Date.now() - app.pm2_env.pm_uptime ) / 60 / 1000 ).toLocaleString( 'en-us', {maximumSignificantDigits: 3})
      tr
        th Uptime (hr)
        td= ( ( Date.now() - app.pm2_env.pm_uptime ) / 3600 / 1000 ).toLocaleString( 'en-us', {maximumSignificantDigits: 3})

      tr
        th Versioning
        td
          table.table.table-condensed
            tr
              th Type
              td= app.pm2_env.versioning.type
            tr
              th Branch
              td= app.pm2_env.versioning ? app.pm2_env.versioning.branch : ''
            tr
              th (raw)
              td
                code.code.versioning-value= JSON.stringify(app.pm2_env.versioning)

      tr
        th Env
        td
          table.table.table-condensed
            each value, key in app.pm2_env.env
              tr
                th= key
                td
                  code.code.env-value= value

      tr
        th (raw)
        td
      
          code.code.env-value= JSON.stringify(app.pm2_env)



block document
  

block footer
  hr


block epilogue



